# Redis支持的数据类型
```text
String是Redis最基本的类型，你可以理解成与Memcached一模一样的类型，一个key对应一个value
String类型是二进制安全的。意味着Redis的string可以包含任何数据类型。比如jpg图片或者序列化对象
String类型是Redis最基本的数据类型，一个Redis种字符串value最多可以是512M

```

## 字符串
```shell script
String的数据结构为简单动态字符串(Simple Dynamic String,缩写SDS)。是可以修改的字符串，内部结构实现上类似与Java的ArrayList，
采用了冗余空间的方式来减少内存的饿频繁分配。当总覅创建长度小于1M的时候，扩容都是加倍现有的空间，如果超过1M，扩容每次都只是多扩容1M的
空间。需要注意的是字符串最大长度是512M.

```

## Redis列表(List)
单键多值
Redis列表是简单的字符串列表，按照插入顺序排序。可以添加一个元素到列表的头部(左边)或者尾部(右边)。
他的底层实际是一个双向链表，对两端的操作性能很高，通过索引下表的操作中间的结点性能会比较差。
命令
```shell script
# 在队列的左侧添加给键k1添加值v1
127.0.0.1:6379> lpush k1 v1
(integer) 1
# 在队列的左侧添加给键k1添加值v2
127.0.0.1:6379> lpush k1 v2
(integer) 2
# 在队列的左侧添加给键k1添加值v3
127.0.0.1:6379> lpush k1 v3
(integer) 3
# 在队列的左侧添加给键k1添加值v4
127.0.0.1:6379> lpush k1 v4
(integer) 4
# 获取所有的值
127.0.0.1:6379> lrange k1 0 -1
1) "v4"
2) "v3"
3) "v2"
4) "v1"
# 在列表的右侧给k2键添加值v1
127.0.0.1:6379> rpush k2 v1
(integer) 1
# 在列表的右侧给k2键添加值v2
127.0.0.1:6379> rpush k2 v2
(integer) 2
# 在列表的右侧给k2键添加值v3
127.0.0.1:6379> rpush k2 v3
(integer) 3
# 在列表的右侧给k2键添加值v4
127.0.0.1:6379> rpush k2 v4
(integer) 4
# 在列表的右侧给k2键添加值v5
127.0.0.1:6379> rpush k2 v5
(integer) 5
# 获取所有的元素
127.0.0.1:6379> lrange k2 0 -1
1) "v1"
2) "v2"
3) "v3"
4) "v4"
5) "v5"
# 在键k1的队列右侧弹出1个元素
127.0.0.1:6379> rpop k1 1
1) "v1"
# 在键k1的队列右侧弹出2个元素
127.0.0.1:6379> rpop k1 2
1) "v2"
2) "v3"
127.0.0.1:6379> lpush k1 v111
(integer) 2
127.0.0.1:6379> lrange k1 0 -1
1) "v111"
2) "v4"
# 从键k1的队列弹出一个元素压入键k2队列的左边
127.0.0.1:6379> rpoplpush k1 k2
"v4"
127.0.0.1:6379> lrange k1 0 -1
1) "v111"
127.0.0.1:6379> lrange k2 0 -1
1) "v4"
2) "v1"
3) "v2"
4) "v3"
5) "v4"
6) "v5"
# 获取列表的长度
127.0.0.1:6379> llen k1
(integer) 1
127.0.0.1:6379> llen k2
(integer) 6
# 在v5前面插入一个值vv5
127.0.0.1:6379> linsert k2 before "v5" "vv5"
(integer) 7
127.0.0.1:6379> lrange k2 0 -1
1) "v4"
2) "v1"
3) "v2"
4) "v3"
5) "v4"
6) "vv5"
7) "v5"
#在队列左侧删除一个 "vv5"的值
127.0.0.1:6379> lrem k2 1 "vv5"
(integer) 1
# 
127.0.0.1:6379> lset k2 0 v0
OK
127.0.0.1:6379> lrange k2 0 -1
1) "v0"
2) "v1"
3) "v2"
4) "v3"
5) "v4"
6) "v5"

```

注意:
lpop/rpop如果值还没有取完，键还会存在，如果值取完了，键就消失了。
[Redis列表的数据结构](https://app.diagrams.net/#Hchenanddom%2FCharts%2Fmain%2Frepo%2Fredis%E5%88%97%E8%A1%A8%E7%9A%84%E7%BB%93%E6%9E%84.drawio)

Redis的列表List，如果在数据比少的时候，就会分配一块内存存储列表数据，这块内存就叫zipList(压缩列表)，如果数据比较大，占据的内存比较大，
那么就需要开辟多个内存，并且将这些内存使用列表连接起来。这个链表就叫QuickList


## set集合
```shell script
127.0.0.1:6379> sadd k1 v1 v2 v3 v4
(integer) 4
# 获取set集合内的所有值
127.0.0.1:6379> smembers k1
1) "v2"
2) "v4"
3) "v1"
4) "v3"
# 判断集合内是否存在某个值
127.0.0.1:6379> sismember k1 v1
(integer) 1
127.0.0.1:6379> sismember k1 v5
(integer) 0
#返回集合的元素的个数
127.0.0.1:6379> scard k1
(integer) 4
#删除集合种的对应的元素
127.0.0.1:6379> srem k1 v2 v3
(integer) 2
127.0.0.1:6379> smembers k1
1) "v4"
2) "v1"
# 随机的从集合种吐出一个元素
127.0.0.1:6379> spop k1
"v4"
#从集合随机的获取两个元素,不删除
127.0.0.1:6379> srandmember k1 2
1) "v5"
2) "v1"
127.0.0.1:6379> smembers k1
1) "v7"
2) "v6"
3) "v2"
4) "v5"
5) "v1"
6) "v4"
7) "v3"
---------------------------------------------
127.0.0.1:6379> flushdb
OK
# 添加集合
127.0.0.1:6379> sadd k1 v1 v3 v5
(integer) 3
127.0.0.1:6379> sadd k2 v2 v4
(integer) 2
# 将k1集合的v5元素挪到k2集合
127.0.0.1:6379> smove k1 k2 v5
(integer) 1
127.0.0.1:6379> smembers k1
1) "v1"
2) "v3"
127.0.0.1:6379> smembers k2
1) "v5"
2) "v2"
3) "v4"
-----------------------------------------------
127.0.0.1:6379> smembers k1
1) "v5"
2) "v1"
3) "v3"
127.0.0.1:6379> smembers k2
1) "v5"
2) "v2"
3) "v4"
# 取交集
127.0.0.1:6379> sadd k1 v5
(integer) 1
127.0.0.1:6379> sinter k1 k2
1) "v5"
-----------------------------------------------
#取并集
127.0.0.1:6379> smembers k1
1) "v5"
2) "v1"
3) "v3"
127.0.0.1:6379> smembers k2
1) "v5"
2) "v2"
3) "v4"
127.0.0.1:6379> sunion k1 k2
1) "v2"
2) "v5"
3) "v1"
4) "v3"
5) "v4"
-----------------------------------------------
# 取差值，取在k1不在k2的值元素
127.0.0.1:6379> smembers k1
1) "v5"
2) "v1"
3) "v3"
127.0.0.1:6379> smembers k2
1) "v5"
2) "v2"
3) "v4"
127.0.0.1:6379> sdiff k1 k2
1) "v1"
2) "v3"
```
Set数据结构是dict字典，字典是使用哈希白哦实现的。
